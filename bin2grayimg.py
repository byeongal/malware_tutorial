import cv2
import numpy as np

K = 1000

def make_bin_image(bin_path, img_path):
    with open(bin_path, 'rb') as f:
        file_data = f.read()
    file_size = len(file_data)
    if file_size < 10 * K:
        image_width = 32
    elif file_size < 30 * K:
        image_width = 64
    elif file_size < 60 * K:
        image_width = 128
    elif file_size < 100 * K:
        image_width = 256
    elif file_size < 200 * K:
        image_width = 384
    elif file_size < 500 * K:
        image_width = 512
    elif file_size < 1000 * K:
        image_width = 768
    else:
        image_width = 1024
    image_height = file_size // image_width
    file_array = np.array(list(file_data[:image_width * image_height]))
    file_img = np.reshape(file_array, (image_height, image_width))
    file_img = np.uint8(file_img)
    file_img = cv2.resize(file_img, (224, 224), interpolation=cv2.INTER_NEAREST)

    cv2.imwrite(img_path, file_img)